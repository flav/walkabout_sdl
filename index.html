<!DOCTYPE html>
<html>
    <head>
        <title>SDL</title>
        <meta charset="utf-8" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    </head>

    <body>
        <center>
            <canvas id="canvas" oncontextmenu="event.preventDefault();"></canvas>
            <script type="text/javascript">
                var Module = {
                    canvas: (function () {
                        return document.getElementById('canvas');
                    })(),
                };

                document.addEventListener('touchstart', touch2Mouse, true);
                document.addEventListener('touchmove', touch2Mouse, true);
                document.addEventListener('touchend', touch2Mouse, true);

                function touch2Mouse(e) {
                    var theTouch = e.changedTouches[0];
                    var mouseEv;

                    switch (e.type) {
                        case 'touchstart':
                            mouseEv = 'mousedown';
                            break;
                        case 'touchend':
                            mouseEv = 'mouseup';
                            break;
                        case 'touchmove':
                            mouseEv = 'mousemove';
                            break;
                        default:
                            return;
                    }

                    var mouseEvent = document.createEvent('MouseEvent');
                    mouseEvent.initMouseEvent(
                        mouseEv,
                        true,
                        true,
                        window,
                        1,
                        theTouch.screenX,
                        theTouch.screenY,
                        theTouch.clientX,
                        theTouch.clientY,
                        false,
                        false,
                        false,
                        false,
                        0,
                        null
                    );
                    theTouch.target.dispatchEvent(mouseEvent);

                    e.preventDefault();
                }
            </script>
            <script type="text/javascript" src="index.js"></script>
        </center>
    </body>
</html>
